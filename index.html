<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MISOYON MMS v13.0</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: #f8fafc; }
        #root { width: 100%; height: 100%; display: flex; flex-direction: column; }
        
        /* 셰프님 지시사항 반영: 모바일은 세로(Column), PC는 가로(Row) 배치 */
        .responsive-layout { display: flex; flex: 1; flex-direction: column; overflow: hidden; }
        @media (min-width: 1024px) { 
            .responsive-layout { flex-direction: row; } 
        }

        .calendar-section { flex: 2; display: flex; flex-direction: column; min-height: 50%; overflow-y: auto; }
        .menu-section { flex: 1; background: white; padding: 1rem; overflow-y: auto; border-top: 1px solid #e2e8f0; min-height: 40%; }
        
        @media (min-width: 1024px) {
            .calendar-section { flex: 3; border-right: 1px solid #e2e8f0; min-height: auto; overflow: hidden; }
            .menu-section { flex: 1; border-top: none; min-height: auto; }
        }

        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); grid-auto-rows: minmax(60px, 1fr); background: #cbd5e1; gap: 1px; border: 1px solid #cbd5e1; height: 100%; }
        /* PC에서는 달력 행 높이를 균등하게 */
        @media (min-width: 1024px) {
            .calendar-grid { grid-template-rows: 25px repeat(6, 1fr); grid-auto-rows: auto; }
        }

        .calendar-header { background: #f8fafc; text-align: center; font-size: 9px; font-weight: 900; color: #94a3b8; padding: 4px 0; border-bottom: 1px solid #cbd5e1; }
        .calendar-day { background: white; padding: 2px 4px; cursor: pointer; display: flex; flex-direction: column; overflow: hidden; min-height: 0; }
        .calendar-day.selected { background: #eff6ff !important; box-shadow: inset 0 0 0 2px #3b82f6; z-index: 10; }
        
        .menu-text { font-size: 9px; font-weight: 800; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px; padding: 1px 2px; border-radius: 2px; }
        
        .modal-view { position: fixed; inset: 0; background: white; z-index: 200; display: flex; flex-direction: column; padding: 15px; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .recipe-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 300; display: flex; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(4px); }
        .hl-red { color: #ef4444; text-decoration: underline; font-weight: 900; }
        .clickable-menu { cursor: pointer !important; transition: all 0.2s; border: 1px solid transparent; }
        .recipe-content { font-size: 13px; font-weight: 600; color: #1e293b; line-height: 1.7; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const MisoYonApp = () => {
            const MENU_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSnsej-xGogyedNPYTs2iqEMFKAwIL3tipLoSiDDKxKHot-PITnmxYETDseGckqpb6EMiQm39Sfol0-/pub?output=csv";
            
            const RECIPE_STORE = {
                "다슬기": { name: "다슬기국 (안동 골부리국)", ingredients: `다슬기 500g, 얼갈이 100g, 부추 50g, 대파 30g, 다진마늘 15g, 밀가루 10g, 황태육수 3L, 된장 15g`, process: `1. 다슬기 해감 후 삶아 살 발라내기(삶은 물 보관)\n2. 삶은 얼갈이, 대파를 밀가루, 된장, 마늘에 버무리기\n3. 육수와 다슬기 물을 섞어 끓이다가 버무린 재료 투입\n4. 마지막에 부추를 넣어 완성` },
                "복어매운탕": { name: "복어 매운탕", ingredients: `복어 2kg, 콩나물 180g, 미나리 100g, 비법 다데기, 가쓰오부시 육수 2L`, process: `1. 복어 손질 후 3시간 동안 찬물에 담가 핏물 제거\n2. 가쓰오부시 육수에 다데기를 풀어 충분히 끓임\n3. 콩나물을 깔고 복어를 넣어 익힌 후 미나리로 마무리` },
                "북어국": { name: "전통 북어국", ingredients: `북어 50g, 무 100g, 계란 1알, 두부, 참기름, 다진마늘`, process: `1. 북어 불린 후 참기름에 북어와 무를 볶기\n2. 육수를 조금씩 부어가며 뽀얗게 색이 나도록 볶는 것이 포인트\n3. 남은 육수를 붓고 끓이다 계란물과 대파로 완성` },
                "사골우거지": { name: "사골 우거지 해장국", ingredients: `양지머리 300g, 얼갈이 우거지 100g, 사골육수 10컵, 된장, 고추장`, process: `1. 삶은 얼갈이에 된장, 고추장 양념을 미리 버무림\n2. 사골육수에 된장을 풀고 양지와 우거지를 넣어 푹 끓임\n3. 대파와 마늘로 깊은 맛을 내어 마무리` },
                "선지해장국": { name: "장터 선지 해장국", ingredients: `선지 1kg, 우거지 100g, 콩나물 50g, 된장 육수 8컵`, process: `1. 선지는 은근한 불에 데쳐 식감을 살림\n2. 우거지와 콩나물을 고추장 양념에 무쳐 육수와 함께 끓임\n3. 데친 선지와 양념장을 넣고 한소끔 더 끓여 완성` },
                "소고기무국": { name: "소고기 무국", ingredients: `소고기 양지 200g, 무 200g, 다시마 육수, 참기름, 국간장`, process: `1. 고기와 무를 참기름에 볶다 육수를 붓고 끓임\n2. 올라오는 거품을 계속 걷어내어 맑은 국물을 유지\n3. 국간장과 소금으로 간을 하고 대파로 마무리` },
                "시래기": { name: "시래기 된장국", ingredients: `무청 시래기 100g, 된장 60g, 멸치 육수 8컵`, process: `1. 삶은 시래기를 된장에 버무려 밑간\n2. 육수에 시래기를 넣고 약한 불에서 푹 고아 부드럽게 만듦\n3. 마늘과 대파를 넣어 구수한 풍미를 올림` },
                "오징어무국": { name: "오징어 무국", ingredients: `오징어 1kg, 무 100g, 멸치육수 2L, 새우젓, 고춧가루`, process: `1. 무를 먼저 끓이다가 고춧가루를 풀어 색을 냄\n2. 새우젓으로 간을 한 뒤 오징어를 넣어 질기지 않게 익힘\n3. 대파와 청양고추로 칼칼하게 마무리` },
                "육개장": { name: "전통 육개장", ingredients: `한우 양지 300g, 대파, 고사리, 토란대, 고추기름`, process: `1. 삶은 양지를 찢어 마늘, 간장 양념 후 육수에 끓임\n2. 고사리, 토란대를 넣고 푹 끓이다 고추기름으로 색을 냄\n3. 숙주를 마지막에 넣어 아삭한 식감을 살림` },
                "주꾸미맑은탕": { name: "주꾸미 맑은탕", ingredients: `주꾸미 1kg, 미나리, 바지락 육수 1.6L, 새우젓`, process: `1. 손질한 주꾸미를 끓는 육수에 살짝 익힘\n2. 주꾸미가 익으면 미나리와 대파를 넣어 향을 더함\n3. 새우젓으로 깔끔하게 간을 하여 시원한 맛을 냄` },
                "영광굴비": { name: "영광굴비 구이", ingredients: `영광굴비, 쌀뜨물, 참기름, 생강술`, process: `1. 쌀뜨물 전처리로 비린내 완벽 제거\n2. 참기름을 골고루 바른 뒤 오븐 조리\n3. 180도에서 앞뒤로 노릇하게 구워 완성` },
                "주꾸미전복": { name: "주꾸미 전복볶음", ingredients: `주꾸미, 전복, 굴소스, 버터, 마늘, 생강`, process: `1. 해산물을 살짝 데쳐 수분 발생 억제\n2. 마늘, 생강 기름에 향을 낸 뒤 빠르게 볶음\n3. 마지막에 버터를 넣어 고소한 풍미를 입힘` },
                "박대구이
