<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë¯¸ì†Œì—° MMS v11.9 - ì™„ë²½ ë³µêµ¬ë³¸</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: #f8fafc; }
        #root { width: 100%; height: 100%; display: flex; flex-direction: column; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: 25px repeat(6, 1fr); flex: 1; background: #cbd5e1; gap: 1px; border: 1px solid #cbd5e1; min-height: 0; }
        .calendar-day { background: white; padding: 2px 4px; cursor: pointer; display: flex; flex-direction: column; overflow: hidden; min-height: 0; position: relative; }
        .calendar-day.selected { background: #eff6ff !important; box-shadow: inset 0 0 0 2px #3b82f6; z-index: 10; }
        .menu-text { font-size: 9px; font-weight: 800; line-height: 1.1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px; padding: 1px 2px; border-radius: 2px; }
        .modal-view { position: fixed; inset: 0; background: white; z-index: 200; display: flex; flex-direction: column; padding: 15px; }
        .recipe-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 500; display: flex; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(4px); }
        .recipe-content { font-size: 14px; font-weight: 600; color: #1e293b; line-height: 1.7; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const MisoYonApp = () => {
            const MENU_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSnsej-xGogyedNPYTs2iqEMFKAwIL3tipLoSiDDKxKHot-PITnmxYETDseGckqpb6EMiQm39Sfol0-/pub?output=csv";
            
            // ì…°í”„ë‹˜ì´ ì£¼ì‹  ë ˆì‹œí”¼ ë°ì´í„° (ì›ë³¸ ê·¸ëŒ€ë¡œ ê³ ì •)
            const RECIPE_DATA = {
                "ë¶ˆê³ ê¸°": { name: "ì„œìš¸ì‹ ë¶ˆê³ ê¸°", ingredients: "í•œìš° ë¶ˆê³ ê¸°(ë“±ì‹¬) 1kg, ë°° 1, ì–‘íŒŒ 1, íŒ½ì´ë²„ì„¯ 1, ëŠíƒ€ë¦¬ë²„ì„¯ 50, ë¶ˆë¦° ë‹¹ë©´ 100, ëŒ€íŒŒ 1, ë‹¤ì‹œë§ˆ ìœ¡ìˆ˜ 200, ì°¸ê¸°ë¦„ 15, ë§¤ì‹¤ì•¡ 5, ì§„ê°„ìž¥ 100, ë‹¤ì§„ ë§ˆëŠ˜ 30, ì„¤íƒ• 45, í›„ì¶”", process: "1. ë°°ì¦™ì— ì–‘ë…ìž¥ì„ ë§Œë“ ë‹¤.\n2. ì±„ì†Œ ì†ì§ˆ í›„ ê³ ê¸°ë¥¼ ìž¬ìš´ë‹¤.\n3. ìœ¡ìˆ˜ë¥¼ ë¶€ì–´ ìµížˆë‹¤ ë²„ì„¯, ë‹¹ë©´, ëŒ€íŒŒë¡œ ë§ˆë¬´ë¦¬.", tip: "ë°°ì¦™ì„ ì‚¬ìš©í•˜ë©´ ì—°ìœ¡ ìž‘ìš©ìœ¼ë¡œ ê³ ê¸°ê°€ ë¶€ë“œëŸ¬ì›Œì§‘ë‹ˆë‹¤." },
                "ê°ˆë¹„íƒ•": { name: "ê°ˆë¹„íƒ•", ingredients: "í•œìš°ê°ˆë¹„ 500, ë¬´ 200, ëŒ€íŒŒ 30, í†µë§ˆëŠ˜ 5ì•Œ, ê³„ëž€ 1ê°œ, ì†Œê¸ˆ, êµ­ê°„ìž¥, ì–‘ë…(êµ­ê°„ìž¥ 5, ì†Œê¸ˆ 2, ë‹¤ì§„íŒŒ 5, ë‹¤ì§„ë§ˆëŠ˜ 5, ì°¸ê¸°ë¦„ 2, í›„ì¶”)", process: "1. ê°ˆë¹„ í•ë¬¼ì„ ë¹¼ê³  ë°ì³ë‚¸ë‹¤.\n2. ë¬¼ì„ ìƒˆë¡œ ë°›ì•„ ê°ˆë¹„ë¥¼ í‘¹ ë“ì¸ë‹¤.\n3. ë¬´, ë§ˆëŠ˜, ëŒ€íŒŒë¥¼ ë„£ê³  ê³ ê¸°ê°€ ìµìœ¼ë©´ ê±´ì ¸ ì–‘ë…í•œë‹¤.\n4. ì§€ë‹¨ì„ ì˜¬ë ¤ ì™„ì„±.", tip: "ê³ ê¸°ì™€ ë¬´ë¥¼ ë”°ë¡œ ì–‘ë…ì— ë²„ë¬´ë ¤ ë‘ì—ˆë‹¤ê°€ êµ­ë¬¼ì— ë„£ìœ¼ë©´ ë§›ì´ ë” ê¹ŠìŠµë‹ˆë‹¤." },
                "ë¬´êµ­": { name: "ê²½ìƒë„ì‹ ì†Œê³ ê¸° ë¬´êµ­", ingredients: "í•œìš°ì–‘ì§€ 300, ë¬´ 300, ëŒ€íŒŒ 2, ìˆ™ì£¼ 200, ë©¸ì¹˜ìœ¡ìˆ˜ 1.8L, êµ­ê°„ìž¥ 25, ì•¡ì “ 15, ë‹¤ì§„ë§ˆëŠ˜ 15, ê³ ì¶§ê°€ë£¨ 30", process: "1. ì–‘ì§€ í•ë¬¼ì„ ë¹¼ê³  ë¬´ì™€ í•¨ê»˜ ìœ¡ìˆ˜ì— ë“ì¸ë‹¤.\n2. êµ­ê°„ìž¥, ì•¡ì “ìœ¼ë¡œ ê°„ì„ í•œë‹¤.\n3. ëŒ€íŒŒ, ë§ˆëŠ˜, ê³ ì¶§ê°€ë£¨ë¥¼ ë„£ê³  ë§ˆì§€ë§‰ì— ìˆ™ì£¼ë¥¼ ë„£ì–´ 8ë¶„ê°„ ë“ì¸ë‹¤.", tip: "ë§ˆì§€ë§‰ì— ìˆ™ì£¼ë¥¼ ë„£ì–´ì•¼ ì•„ì‚­í•œ ì‹ê°ì´ ì‚´ì•„ë‚©ë‹ˆë‹¤." },
                "ì†Œë¨¸ë¦¬êµ­ë°¥": { name: "ê³¤ì§€ì•” ì†Œë¨¸ë¦¬êµ­ë°¥", ingredients: "ì‚¬ê³¨ 1kg, ì†Œë¨¸ë¦¬ê³ ê¸° 800g, ì¸ì‚¼ 150g, ë¬´ 200g, ìŒ€, ë¬¼, ì–‘ë…ìž¥(êµ­ê°„ìž¥ 30g, ë‹¤ì§„ íŒŒ 5g, ì‹ì´ˆ 10g, í†µê¹¨ 5g)", process: "1. ì‚¬ê³¨ê³¼ ê³ ê¸° í•ë¬¼ì„ ëº€ë‹¤.\n2. ì‚¬ê³¨ì„ ë¨¼ì € ë“ì—¬ ë½€ì–—ê²Œ ìš°ë ¤ë‚¸ë‹¤.\n3. ë¨¸ë¦¬ê³ ê¸°ë¥¼ ë„£ê³  2ì‹œê°„ ì‚¶ì€ ë’¤ ë¬´ì™€ ì¸ì‚¼ì„ ë„£ê³  ë” ì‚¶ëŠ”ë‹¤.", tip: "ì–‘ë…ìž¥ì— ì‹ì´ˆë¥¼ ì‚´ì§ ë„£ìœ¼ë©´ ê³ ê¸°ì˜ ê¸°ë¦„ì§„ ë§›ì„ ìž¡ì•„ì¤ë‹ˆë‹¤." },
                "ê³°êµ­": { name: "ê³°êµ­", ingredients: "ì‚¬ê³¨ 1kg, ìš°ìž¡ë¼ˆ 1kg, ì–‘ì§€ 500, ëŒ€íŒŒ, ë‹¤ì§„ë§ˆëŠ˜, ì†Œê¸ˆ, í›„ì¶”", process: "1. ë¼ˆ í•ë¬¼ì„ ë¹¼ê³  íŒ”íŒ” ë“ì¸ë‹¤.\n2. ìƒ‰ì´ ìš°ëŸ¬ë‚˜ë©´ ì–‘ì§€ë¥¼ ë„£ê³  ê¸°ë¦„ì„ ê±·ì–´ë‚´ë©° ë“ì¸ë‹¤.\n3. ì–‘ì§€ë¥¼ ì–‡ê²Œ ì°ì–´ êµ­ë¬¼ê³¼ í•¨ê»˜ ë‚¸ë‹¤.", tip: "ë“ì´ëŠ” ë™ì•ˆ ë– ì˜¤ë¥´ëŠ” ê±°í’ˆê³¼ ê¸°ë¦„ì„ ìˆ˜ì‹œë¡œ ê±·ì–´ë‚´ì•¼ êµ­ë¬¼ì´ ë§‘ìŠµë‹ˆë‹¤." },
                "ë°±í•©íƒ•": { name: "ëƒ‰ì´ë°±í•©íƒ•", ingredients: "ë°±í•© 2kg, ëƒ‰ì´ 300g, ë‘ë¶€ 1, í™©ê¸ˆíŒ½ì´, ëŒ€íŒŒ, ì²­ì–‘ê³ ì¶”, í™ê³ ì¶”, ì†Œê¸ˆ, ìƒˆìš°ì “, ë©¸ì¹˜ìœ¡ìˆ˜ 10L", process: "1. ë°±í•© í•´ê° í›„ ìœ¡ìˆ˜ì— ë“ì—¬ ê±´ì ¸ë‚¸ë‹¤.\n2. ìœ¡ìˆ˜ë¥¼ ë©´í¬ì— ê±°ë¥¸ ë’¤ ë‹¤ì‹œ ë“ì—¬ ë‘ë¶€ì™€ ì±„ì†Œë¥¼ ë„£ëŠ”ë‹¤.\n3. ì†Œê¸ˆ, ìƒˆìš°ì “ìœ¼ë¡œ ê°„ì„ í•˜ê³  ë°±í•©ì„ í•©ì¹œë‹¤.", tip: "ëƒ‰ì´ëŠ” ë„ˆë¬´ ì˜¤ëž˜ ë“ì´ë©´ í–¥ì´ ë‚ ì•„ê°€ë¯€ë¡œ ë§ˆì§€ë§‰ì— ì‚´ì§ë§Œ ìµížˆì„¸ìš”." },
                "ë‹¤ìŠ¬ê¸°êµ­": { name: "ë‹¤ìŠ¬ê¸°êµ­ (ê³¨ë¶€ë¦¬êµ­)", ingredients: "ë‹¤ìŠ¬ê¸° 500g, ì–¼ê°ˆì´ 100g, ë¶€ì¶” 50g, ëŒ€íŒŒ 30g, ë‹¤ì§„ë§ˆëŠ˜ 15g, êµ­ê°„ìž¥ 10g, ê³ ì¶§ê°€ë£¨ 30g, ì†Œê¸ˆ 5g, ë°€ê°€ë£¨ 10g, í™©íƒœìœ¡ìˆ˜ 3L, ëœìž¥ 15g", process: "1. ë‹¤ìŠ¬ê¸°ë¥¼ ì‚¶ì•„ ì‚´ì„ ë°”ë¥¸ë‹¤.\n2. ë‚˜ë¬¼ê³¼ ì–‘ë…, ë°€ê°€ë£¨ë¥¼ ë²„ë¬´ë¦°ë‹¤.\n3. ìœ¡ìˆ˜ì— ë‹¤ìŠ¬ê¸° ì‚¶ì€ ë¬¼ì„ ì„žì–´ ë“ì´ë‹¤ ë‚˜ë¬¼ì„ ë„£ê³  ë¶€ì¶”ë¡œ ë§ˆë¬´ë¦¬.", tip: "ë‚˜ë¬¼ì— ë°€ê°€ë£¨ë¥¼ ìž…í˜€ ë“ì´ë©´ êµ­ë¬¼ì´ ê±¸ì­‰í•´ì§€ê³  êµ¬ìˆ˜í•œ ë§›ì´ ë°°ê°€ë©ë‹ˆë‹¤." },
                "ë§¤ìš´íƒ•": { name: "ìš°ëŸ­ë§¤ìš´íƒ•", ingredients: "ìš°ëŸ­ 3ë§ˆë¦¬, ì„œë”ë¦¬ 1kg, ë¬´ 150, ë‘ë¶€ 1ëª¨, ì‘¥ê°“, í˜¸ë°• 60, ë©¸ì¹˜ìœ¡ìˆ˜ 5L, ë‹¤ë°ê¸°", process: "1. ì„œë”ë¦¬ ìœ¡ìˆ˜ë¥¼ ë‚´ê³  ë‹¤ë°ê¸°ë¥¼ í‘¼ë‹¤.\n2. ìœ¡ìˆ˜ë¥¼ ê±¸ëŸ¬ ë¬´ë¥¼ ë„£ê³  ë“ì¸ë‹¤.\n3. ìš°ëŸ­, í˜¸ë°•, ë‘ë¶€ë¥¼ ë„£ê³  ì‘¥ê°“ìœ¼ë¡œ ë§ˆë¬´ë¦¬.", tip: "ì„œë”ë¦¬ë¥¼ ë¨¼ì € ë“ì—¬ ìœ¡ìˆ˜ë¥¼ ì§„í•˜ê²Œ ë‚´ëŠ” ê²ƒì´ ë¹„ë²•ìž…ë‹ˆë‹¤." },
                "ë¯¸ì—­êµ­": { name: "ë°”ì§€ë½ ë¯¸ì—­êµ­", ingredients: "ë°”ì§€ë½, ë¯¸ì—­, ë¶ˆë¦°ìŒ€ 250, ì†Œê³ ê¸°ë¯¼ì°Œ 150, ë‹¤ì‹œë§ˆ ìœ¡ìˆ˜ 1L, ì°¸ê¸°ë¦„, ì†Œê¸ˆ, í‘œê³ ë²„ì„¯ 5ê°œ, íŒŒ, ì–‘íŒŒ, ë‹¹ê·¼, êµ­ê°„ìž¥", process: "1. ë¯¸ì—­ê³¼ ë°”ì§€ë½ì„ ì†ì§ˆí•œë‹¤.\n2. ì°¸ê¸°ë¦„ì— ì†Œê³ ê¸°ë¥¼ ë³¶ë‹¤ ìŒ€ê³¼ ì±„ì†Œë¥¼ ë„£ê³  ë³¶ëŠ”ë‹¤.\n3. ìœ¡ìˆ˜ë¥¼ ë¶“ê³  ë“ì´ë‹¤ ë¯¸ì—­ê³¼ ë°”ì§€ë½ì„ ë„£ì–´ ì™„ì„±.", tip: "ìŒ€ì„ ì°¸ê¸°ë¦„ì— ì¶©ë¶„ížˆ ë³¶ì•„ì•¼ êµ­ë¬¼ì´ ë½€ì–—ê³  ê³ ì†Œí•´ì§‘ë‹ˆë‹¤." },
                "ë°°ì¶”êµ­": { name: "ë°°ì¶”êµ­", ingredients: "ë°°ì¶” 250, í•œìš°ì‚¬íƒœ 100, ìŒ€ëœ¨ë¬¼ 6ì»µ, í™ê³ ì¶”, ì²­ì–‘ê³ ì¶”, ë‹¤ì§„ë§ˆëŠ˜ 10, ëŒ€íŒŒ, ëœìž¥", process: "1. ìŒ€ëœ¨ë¬¼ ìœ¡ìˆ˜ë¥¼ ë‚¸ë‹¤.\n2. ìœ¡ìˆ˜ì— ëœìž¥ì„ í’€ê³  ë°°ì¶”ì™€ ì‚¬íƒœë¥¼ ë„£ê³  ë“ì¸ë‹¤.\n3. ê³ ì¶”ì™€ ë§ˆëŠ˜ë¡œ ë§ˆë¬´ë¦¬.", tip: "ìŒ€ëœ¨ë¬¼ì„ ì‚¬ìš©í•˜ë©´ ëœìž¥ì˜ ë–«ì€ë§›ì„ ìž¡ê³  êµ¬ìˆ˜í•œ ë§›ì„ ë”í•´ì¤ë‹ˆë‹¤." }
            };

            const [menus, setMenus] = useState([]);
            const [selectedDate, setSelectedDate] = useState(null);
            const [currentMonth, setCurrentMonth] = useState(new Date());
            const [searchTerm, setSearchTerm] = useState("");
            const [activeModal, setActiveModal] = useState(false);
            const [viewRecipeList, setViewRecipeList] = useState([]);

            useEffect(() => {
                Papa.parse(MENU_URL, { download: true, complete: (res) => {
                    let temp = []; let headers = [];
                    res.data.forEach(row => {
                        const label = (row[0] || "").trim();
                        const vals = row.slice(1);
                        if (label.includes("ë‚ ì§œ")) {
                            headers = vals.map(v => {
                                const m = (v || "").match(/(\d{4})[^\d]*(\d{1,2})[^\d]*(\d{1,2})/);
                                return m ? `${m[1]}-${m[2].padStart(2, '0')}-${m[3].padStart(2, '0')}` : null;
                            });
                            headers.forEach(d => { if(d) temp.push({ date: d, morning: "", lunch: "", dinner: "" }); });
                        } else if (headers.length > 0) {
                            vals.forEach((v, i) => {
                                if (!headers[i]) return;
                                const t = temp.find(m => m.date === headers[i]);
                                if (t) {
                                    // ì›ë³¸ í…ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ ì €ìž¥ (ê°€ê³µ ê¸ˆì§€)
                                    if (label.includes("ì•„ì¹¨")) t.morning = v;
                                    else if (label.includes("ì ì‹¬")) t.lunch = v;
                                    else if (label.includes("ì €ë…")) t.dinner = v;
                                }
                            });
                        }
                    });
                    setMenus(temp);
                }});
            }, []);

            const findRecipes = (text) => {
                if (!text) return [];
                return Object.keys(RECIPE_DATA)
                    .filter(key => text.replace(/\s/g, "").includes(key))
                    .map(key => RECIPE_DATA[key]);
            };

            const calDays = useMemo(() => {
                const year = currentMonth.getFullYear(), month = currentMonth.getMonth();
                const firstDay = new Date(year, month, 1).getDay();
                const lastDate = new Date(year, month + 1, 0).getDate();
                const days = [];
                for (let i = 0; i < firstDay; i++) days.push(null);
                for (let i = 1; i <= lastDate; i++) {
                    const ds = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                    days.push({ day: i, dateStr: ds, data: menus.find(m => m.date === ds) });
                }
                while (days.length < 42) days.push(null);
                return days;
            }, [currentMonth, menus]);

            const searchResults = useMemo(() => {
                const q = searchTerm.trim().toLowerCase();
                if (!q) return [];
                return menus.filter(m => (m.morning + m.lunch + m.dinner).toLowerCase().includes(q));
            }, [searchTerm, menus]);

            const MenuCard = ({text, type}) => {
                const matched = findRecipes(text);
                const hasRecipe = matched.length > 0;
                return (
                    <div className={`p-4 rounded-xl border mb-3 ${hasRecipe ? 'bg-blue-50 border-blue-200 cursor-pointer' : 'bg-slate-50 border-slate-100'}`}
                         onClick={() => hasRecipe && setViewRecipeList(matched)}>
                        <div className="text-[10px] font-black text-slate-400 uppercase mb-1">{type}</div>
                        <div className={`text-[13px] font-black ${hasRecipe ? 'text-blue-900' : 'text-slate-700'}`}>
                            {text} {hasRecipe && "ðŸ“‹"}
                        </div>
                    </div>
                );
            };

            return (
                <div className="flex flex-col h-screen w-full">
                    <header className="flex justify-between items-center px-6 py-3 bg-white border-b shrink-0 shadow-sm">
                        <div className="flex items-center gap-6">
                            <h1 className="text-xl font-black italic text-slate-800">ë¯¸ì†Œì—° <span className="text-blue-600">MMS v11.9</span></h1>
                            <div className="flex bg-slate-100 rounded-xl p-
