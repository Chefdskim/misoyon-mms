<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÎØ∏ÏÜåÏó∞ MMS v11.9 - ÏõêÎ≥∏ Î≥µÍµ¨Î≥∏</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: #f8fafc; }
        #root { width: 100%; height: 100%; display: flex; flex-direction: column; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: 25px repeat(6, 1fr); flex: 1; background: #cbd5e1; gap: 1px; border: 1px solid #cbd5e1; min-height: 0; }
        .calendar-day { background: white; padding: 2px 4px; cursor: pointer; display: flex; flex-direction: column; overflow: hidden; min-height: 0; position: relative; }
        .calendar-day.selected { background: #eff6ff !important; box-shadow: inset 0 0 0 2px #3b82f6; z-index: 10; }
        .menu-text { font-size: 9px; font-weight: 800; line-height: 1.1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px; padding: 1px 2px; border-radius: 2px; }
        .modal-view { position: fixed; inset: 0; background: white; z-index: 200; display: flex; flex-direction: column; padding: 15px; }
        .recipe-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 500; display: flex; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(4px); }
        .recipe-content { font-size: 14px; font-weight: 600; color: #1e293b; line-height: 1.7; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const MisoYonApp = () => {
            const MENU_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSnsej-xGogyedNPYTs2iqEMFKAwIL3tipLoSiDDKxKHot-PITnmxYETDseGckqpb6EMiQm39Sfol0-/pub?output=csv";
            
            // ÏÖ∞ÌîÑÎãòÏù¥ Ï£ºÏã† Î†àÏãúÌîº 10Ï¢Ö ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Îç∞Ïù¥ÌÑ∞
            const RECIPE_STORE = {
                "Î∂àÍ≥†Í∏∞": { name: "ÏÑúÏö∏Ïãù Î∂àÍ≥†Í∏∞", ingredients: "ÌïúÏö∞ Î∂àÍ≥†Í∏∞(Îì±Ïã¨) 1kg, Î∞∞ 1, ÏñëÌåå 1, ÌåΩÏù¥Î≤ÑÏÑØ 1, ÎäêÌÉÄÎ¶¨Î≤ÑÏÑØ 50, Î∂àÎ¶∞ ÎãπÎ©¥ 100, ÎåÄÌåå 1, Îã§ÏãúÎßà Ïú°Ïàò 200, Ï∞∏Í∏∞Î¶Ñ 15, Îß§Ïã§Ïï° 5, ÏßÑÍ∞ÑÏû• 100, Îã§ÏßÑ ÎßàÎäò 30, ÏÑ§ÌÉï 45, ÌõÑÏ∂î", process: "1. Î∞∞Ï¶ôÏóê ÏñëÎÖêÏû•ÏùÑ ÎßåÎì†Îã§.\n2. Ï±ÑÏÜå ÏÜêÏßà ÌõÑ Í≥†Í∏∞Î•º Ïû¨Ïö¥Îã§.\n3. ÏÑº Î∂àÏóê ÏùµÌûàÎã§ Ïú°ÏàòÎ•º Î∂ÄÏñ¥ ÏôÑÏÑ±." },
                "Í∞àÎπÑÌÉï": { name: "Í∞àÎπÑÌÉï", ingredients: "ÌïúÏö∞Í∞àÎπÑ 500, Î¨¥ 200, ÎåÄÌåå 30, ÌÜµÎßàÎäò 5Ïïå, Í≥ÑÎûÄ 1Í∞ú, ÏÜåÍ∏à, Íµ≠Í∞ÑÏû•, ÏñëÎÖê(Íµ≠Í∞ÑÏû• 5, ÏÜåÍ∏à 2, Îã§ÏßÑÌåå 5, Îã§ÏßÑÎßàÎäò 5, Ï∞∏Í∏∞Î¶Ñ 2, ÌõÑÏ∂î)", process: "1. Í∞àÎπÑ ÌïèÎ¨ºÏùÑ ÎπºÍ≥† Îç∞Ï≥êÎÇ∏Îã§.\n2. Î¨ºÏùÑ ÏÉàÎ°ú Î∞õÏïÑ Ìëπ ÎÅìÏù∏Îã§.\n3. Î¨¥, ÎßàÎäò, ÎåÄÌååÎ•º ÎÑ£Í≥† Í≥†Í∏∞Í∞Ä ÏùµÏúºÎ©¥ Í±¥Ï†∏ ÏñëÎÖêÌïúÎã§.\n4. ÏßÄÎã®ÏùÑ Ïò¨Î†§ ÏôÑÏÑ±." },
                "Î¨¥Íµ≠": { name: "Í≤ΩÏÉÅÎèÑÏãù ÏÜåÍ≥†Í∏∞ Î¨¥Íµ≠", ingredients: "ÌïúÏö∞ÏñëÏßÄ 300, Î¨¥ 300, ÎåÄÌåå 2, ÏàôÏ£º 200, Î©∏ÏπòÏú°Ïàò 1.8L, Íµ≠Í∞ÑÏû• 25, Ïï°Ï†ì 15, Îã§ÏßÑÎßàÎäò 15, Í≥†Ï∂ßÍ∞ÄÎ£® 30", process: "1. ÏñëÏßÄ ÌïèÎ¨ºÏùÑ ÎπºÍ≥† Î¨¥ÏôÄ Ìï®Íªò Ïú°ÏàòÏóê ÎÅìÏù∏Îã§.\n2. Íµ≠Í∞ÑÏû•, Ïï°Ï†ìÏúºÎ°ú Í∞ÑÏùÑ ÌïúÎã§.\n3. ÎåÄÌåå, ÎßàÎäò, Í≥†Ï∂ßÍ∞ÄÎ£®Î•º ÎÑ£Í≥† ÏàôÏ£ºÎ•º ÎÑ£Ïñ¥ ÎÅìÏù∏Îã§." },
                "ÏÜåÎ®∏Î¶¨Íµ≠Î∞•": { name: "Í≥§ÏßÄÏïî ÏÜåÎ®∏Î¶¨Íµ≠Î∞•", ingredients: "ÏÇ¨Í≥® 1kg, ÏÜåÎ®∏Î¶¨Í≥†Í∏∞ 800g, Ïù∏ÏÇº 150g, Î¨¥ 200g, ÏåÄ, Î¨º, ÏñëÎÖêÏû•(Íµ≠Í∞ÑÏû• 30g, Îã§ÏßÑ Ìåå 5g, ÏãùÏ¥à 10g, ÌÜµÍπ® 5g)", process: "1. ÏÇ¨Í≥®Í≥º Í≥†Í∏∞ ÌïèÎ¨ºÏùÑ Î∫ÄÎã§.\n2. ÏÇ¨Í≥®ÏùÑ ÎÅìÏó¨ Ïö∞Î†§ÎÇ∏ Îí§ Î®∏Î¶¨Í≥†Í∏∞Î•º ÎÑ£Í≥† 2ÏãúÍ∞Ñ ÏÇ∂ÎäîÎã§.\n3. Î¨¥ÏôÄ Ïù∏ÏÇºÏùÑ ÎÑ£Ïñ¥ ÎßàÎ¨¥Î¶¨." },
                "Í≥∞Íµ≠": { name: "Í≥∞Íµ≠", ingredients: "ÏÇ¨Í≥® 1kg, Ïö∞Ïû°Îºà 1kg, ÏñëÏßÄ 500, ÎåÄÌåå, Îã§ÏßÑÎßàÎäò, ÏÜåÍ∏à, ÌõÑÏ∂î", process: "1. Îºà ÌïèÎ¨ºÏùÑ ÎπºÍ≥† ÎÅìÏù∏Îã§.\n2. ÏñëÏßÄÎ•º ÎÑ£Í≥† Í±∞ÌíàÏùÑ Í±∑Ïñ¥ÎÇ¥Î©∞ ÎÅìÏù∏Îã§.\n3. ÏñëÏßÄÎ•º Ïç∞Ïñ¥ Íµ≠Î¨ºÍ≥º Ìï®Íªò ÎÇ∏Îã§." },
                "Î∞±Ìï©ÌÉï": { name: "ÎÉâÏù¥Î∞±Ìï©ÌÉï", ingredients: "Î∞±Ìï© 2kg, ÎÉâÏù¥ 300g, ÎëêÎ∂Ä 1, Ìô©Í∏àÌåΩÏù¥, ÎåÄÌåå, Ï≤≠ÏñëÍ≥†Ï∂î, ÌôçÍ≥†Ï∂î, ÏÜåÍ∏à, ÏÉàÏö∞Ï†ì, Î©∏ÏπòÏú°Ïàò 10L", process: "1. Î∞±Ìï© Ìï¥Í∞ê ÌõÑ Ïú°ÏàòÏóê ÎÅìÏó¨ Í±¥ÏßÑÎã§.\n2. Ïú°ÏàòÎ•º Í±∏Îü¨ ÎëêÎ∂Ä, Ï±ÑÏÜåÎ•º ÎÑ£Í≥† ÎÅìÏù∏Îã§.\n3. ÏÜåÍ∏à, ÏÉàÏö∞Ï†ì Í∞ÑÏùÑ ÌïòÍ≥† Î∞±Ìï©ÏùÑ ÎÑ£ÎäîÎã§." },
                "Îã§Ïä¨Í∏∞Íµ≠": { name: "Îã§Ïä¨Í∏∞Íµ≠ (ÏïàÎèô Í≥®Î∂ÄÎ¶¨Íµ≠)", ingredients: "Îã§Ïä¨Í∏∞ 500g, ÏñºÍ∞àÏù¥ 100g, Î∂ÄÏ∂î 50g, ÎåÄÌåå 30g, Îã§ÏßÑÎßàÎäò 15g, Íµ≠Í∞ÑÏû• 10g, Í≥†Ï∂ßÍ∞ÄÎ£® 30g, Î∞ÄÍ∞ÄÎ£® 10g, ÎêúÏû• 15g", process: "1. Îã§Ïä¨Í∏∞Î•º ÏÇ∂ÏïÑ ÏÇ¥ÏùÑ Î∞îÎ•∏Îã§.\n2. ÎÇòÎ¨ºÍ≥º ÏñëÎÖê, Î∞ÄÍ∞ÄÎ£®Î•º Î≤ÑÎ¨¥Î¶∞Îã§.\n3. Ïú°ÏàòÏóê ÎÑ£Í≥† ÎÅìÏù¥Îã§ Î∂ÄÏ∂îÎ°ú ÎßàÎ¨¥Î¶¨." },
                "Îß§Ïö¥ÌÉï": { name: "Ïö∞Îü≠Îß§Ïö¥ÌÉï", ingredients: "Ïö∞Îü≠ 3ÎßàÎ¶¨, ÏÑúÎçîÎ¶¨ 1kg, Î¨¥ 150, ÎëêÎ∂Ä 1Î™®, Ïë•Í∞ì, Ìò∏Î∞ï 60, Î©∏ÏπòÏú°Ïàò 5L, Îã§Îç∞Í∏∞", process: "1. ÏÑúÎçîÎ¶¨ Ïú°ÏàòÎ•º ÎÇ¥Í≥† Îã§Îç∞Í∏∞Î•º ÌëºÎã§.\n2. Î¨¥Î•º ÎÑ£Í≥† ÎÅìÏù¥Îã§ Ïö∞Îü≠, Ìò∏Î∞ï, ÎëêÎ∂ÄÎ•º ÎÑ£ÎäîÎã§.\n3. Ïë•Í∞ìÏùÑ Ïò¨Î†§ ÎßàÎ¨¥Î¶¨." },
                "ÎØ∏Ïó≠Íµ≠": { name: "Î∞îÏßÄÎùΩ ÎØ∏Ïó≠Íµ≠", ingredients: "Î∞îÏßÄÎùΩ, ÎØ∏Ïó≠, Î∂àÎ¶∞ÏåÄ 250, ÏÜåÍ≥†Í∏∞ÎØºÏ∞å 150, Îã§ÏãúÎßà Ïú°Ïàò 1L, Ï∞∏Í∏∞Î¶Ñ, ÏÜåÍ∏à, ÌëúÍ≥†Î≤ÑÏÑØ, Ìåå, ÏñëÌåå, ÎãπÍ∑º, Íµ≠Í∞ÑÏû•", process: "1. ÎØ∏Ïó≠Í≥º Î∞îÏßÄÎùΩ ÏÜêÏßà.\n2. Ï∞∏Í∏∞Î¶ÑÏóê ÏÜåÍ≥†Í∏∞, ÏåÄÏùÑ Î≥∂Îã§ Ïú°Ïàò Î∂ìÍ≥† ÎÅìÏûÑ.\n3. ÎØ∏Ïó≠Í≥º Î∞îÏßÄÎùΩ ÎÑ£Ïñ¥ ÏôÑÏÑ±." },
                "Î∞∞Ï∂îÍµ≠": { name: "Î∞∞Ï∂îÍµ≠", ingredients: "Î∞∞Ï∂î 250, ÌïúÏö∞ÏÇ¨ÌÉú 100, ÏåÄÎú®Î¨º 6Ïªµ, ÌôçÍ≥†Ï∂î, Ï≤≠ÏñëÍ≥†Ï∂î, Îã§ÏßÑÎßàÎäò 10, ÎåÄÌåå, ÎêúÏû•", process: "1. ÏåÄÎú®Î¨º Ïú°ÏàòÏóê ÎêúÏû•ÏùÑ ÌëºÎã§.\n2. Î∞∞Ï∂îÏôÄ ÏÇ¨ÌÉúÎ•º ÎÑ£Í≥† ÎÅìÏù∏Îã§.\n3. Í≥†Ï∂î, ÎßàÎäòÎ°ú ÎßàÎ¨¥Î¶¨." }
            };

            const [menus, setMenus] = useState([]);
            const [selectedDate, setSelectedDate] = useState(null);
            const [currentMonth, setCurrentMonth] = useState(new Date());
            const [searchTerm, setSearchTerm] = useState("");
            const [activeModal, setActiveModal] = useState(false);
            const [viewRecipe, setViewRecipe] = useState(null);

            useEffect(() => {
                Papa.parse(MENU_URL, { download: true, complete: (res) => {
                    let temp = []; let headers = [];
                    res.data.forEach(row => {
                        const label = (row[0] || "").trim();
                        const vals = row.slice(1);
                        if (label.includes("ÎÇ†Ïßú")) {
                            headers = vals.map(v => {
                                const m = (v || "").match(/(\d{4})[^\d]*(\d{1,2})[^\d]*(\d{1,2})/);
                                return m ? `${m[1]}-${m[2].padStart(2, '0')}-${m[3].padStart(2, '0')}` : null;
                            });
                            headers.forEach(d => { if(d) temp.push({ date: d, morning: "", lunch: "", dinner: "" }); });
                        } else if (headers.length > 0) {
                            vals.forEach((v, i) => {
                                if (!headers[i]) return;
                                const t = temp.find(m => m.date === headers[i]);
                                if (t) {
                                    if (label.includes("ÏïÑÏπ®")) t.morning = v;
                                    else if (label.includes("Ï†êÏã¨")) t.lunch = v;
                                    else if (label.includes("Ï†ÄÎÖÅ")) t.dinner = v;
                                }
                            });
                        }
                    });
                    setMenus(temp);
                }});
            }, []);

            const searchResults = useMemo(() => {
                const q = searchTerm.trim().toLowerCase();
                if (!q) return [];
                return menus.filter(m => (m.morning + m.lunch + m.dinner).toLowerCase().includes(q));
            }, [searchTerm, menus]);

            const getMatchedRecipe = (text) => {
                if (!text) return null;
                const key = Object.keys(RECIPE_STORE).find(k => text.replace(/\s/g,"").includes(k));
                return key ? RECIPE_STORE[key] : null;
            };

            const MenuCard = ({text, type}) => {
                const recipe = getMatchedRecipe(text);
                return (
                    <div className={`p-4 rounded-xl border mb-3 ${recipe ? 'bg-blue-50 border-blue-200 cursor-pointer' : 'bg-slate-50 border-slate-100'}`}
                         onClick={() => recipe && setViewRecipe(recipe)}>
                        <div className="text-[10px] font-black text-slate-400 uppercase mb-1">{type}</div>
                        <div className="text-[13px] font-black text-slate-700">{text} {recipe && "üìã"}</div>
                    </div>
                );
            };

            return (
                <div id="root">
                    <header className="flex justify-between items-center px-6 py-3 bg-white border-b shrink-0">
                        <div className="flex items-center gap-6">
                            <h1 className="text-xl font-black italic text-slate-800">ÎØ∏ÏÜåÏó∞ <span className="text-blue-600">MMS v11.9</span></h1>
                            <div className="flex bg-slate-100 rounded-xl p-1 border text-sm font-bold">
                                <select className="bg-transparent px-2" value={currentMonth.getFullYear()} onChange={e=>setCurrentMonth(new Date(parseInt(e.target.value), currentMonth.getMonth()))}>
                                    {[2024,2025,2026].map(y=><option key={y} value={y}>{y}ÎÖÑ</option>)}
                                </select>
                                <select className="bg-transparent px-2" value={currentMonth.getMonth()+1} onChange={e=>setCurrentMonth(new Date(currentMonth.getFullYear(), parseInt(e.
